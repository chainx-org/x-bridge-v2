(this["webpackJsonpx-bridge-v2"]=this["webpackJsonpx-bridge-v2"]||[]).push([[6],{766:function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));var a=t(22),i=t.n(a),c=t(32),r=t(1),s=t(249),o=t(0);function l(e){var n=Object(o.useState)(null),t=Object(r.a)(n,2),a=t[0],l=t[1],d=Object(s.b)(),u=d.api,b=d.isApiReady;return Object(o.useEffect)((function(){b&&function(){var n=Object(c.a)(i.a.mark((function n(){var t;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=7;break}return n.next=3,u.query.system.account(e);case 3:t=n.sent,l(t),n.next=8;break;case 7:return n.abrupt("return");case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[e,b]),Object(o.useEffect)((function(){if(b){var n=u.rpc.chain.subscribeFinalizedHeads(function(){var n=Object(c.a)(i.a.mark((function n(t){var a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=7;break}return n.next=3,u.query.system.account(e);case 3:a=n.sent,l(a),n.next=8;break;case 7:return n.abrupt("return");case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());return function(){Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}}return function(){}}),[e,b]),a}},767:function(e,n,t){"use strict";n.a=function(e){return"number"===typeof e?(e/1e8).toFixed(5).toString():e?(e.toNumber()/1e8).toFixed(5).toString():"-"}},774:function(e,n,t){"use strict";t.d(n,"d",(function(){return d})),t.d(n,"b",(function(){return u})),t.d(n,"e",(function(){return b})),t.d(n,"a",(function(){return j})),t.d(n,"c",(function(){return x}));var a,i,c,r,s,o=t(58),l=t(59),d=l.a.div(a||(a=Object(o.a)(["\n  margin-top: 20px;\n"]))),u=l.a.div(i||(i=Object(o.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 40px;\n\n  .ant-input-number {\n    width: 200px;\n    height: 44px;\n    font-size: 32px;\n    color: #8E8E8E;\n    line-height: 44px;\n  }\n\n  .btc-title {\n    font-size: 32px;\n    color: #282828;\n    font-weight: bold;\n    margin-left: 16px;\n  }\n\n  img {\n    width: 32px;\n    height: 32px;\n    margin-right: 16px;\n  }\n"]))),b=l.a.div(c||(c=Object(o.a)(["\n  margin-top: 20px;\n  display: flex;\n  justify-content: center;\n  font-size: 14px;\n  color: #282828;\n  font-weight: bold;\n"]))),j=l.a.div(r||(r=Object(o.a)(["\n  margin-top:16px;\n  .btc-address-info{\n    display: flex;\n    justify-content: space-between;\n    .btc-address-title{\n      font-size: 12px;\n      color: #282828;\n      font-weight: bold;\n    }\n    .btc-fee{\n      font-size: 12px;\n      color: #282828;\n    }\n  }\n  .ant-input {\n    width: 419px;\n    height: 44px;\n    font-size: 14px;\n    color: #8E8E8E;\n    line-height: 44px;\n    margin-top: 8px;\n  }\n"]))),x=l.a.footer(s||(s=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  .redeem-footer-title {\n    font-size: 12px;\n    color: #282828;\n  }\n\n  .redeem-footer-num {\n    font-size: 24px;\n    color: #282828;\n    margin-top: 8px;\n  }\n\n  button {\n    width: 419px;\n    height: 44px;\n    margin-top: 20px;\n  }\n"])))},775:function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"a",(function(){return l})),t.d(n,"c",(function(){return d}));var a,i,c,r=t(58),s=t(59),o=s.a.div(a||(a=Object(r.a)(["\n  margin: 24px;\n  background: #fff;\n  height: 100%;\n  padding: 30px;\n"]))),l=s.a.div(i||(i=Object(r.a)(["\n  font-size: 16px;\n  font-weight: bold;\n  color: #8E8E8E;\n  ul{\n    width: 425px;\n    height: 48px;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    background: #F6F6F6;\n    margin-top: 30px;\n    border-radius: 6px;\n  }\n  li{\n    width: 208px;\n    height: 44px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 6px;\n    &.active{\n      background: #fff;\n      color: #282828;\n    }\n  };\n"]))),d=s.a.div(c||(c=Object(r.a)(["\n margin-top: 36px;\n  .ant-table-cell{\n    background: #fff;\n  }\n"])))},892:function(e,n,t){"use strict";t.r(n);var a,i,c,r,s,o,l,d,u,b,j,x=t(22),p=t.n(x),f=t(32),h=t(1),m=t(0),O=t(58),v=t(59),g=v.a.div(a||(a=Object(O.a)(["\n  width: 499px;\n  height: 524px;\n  background: #fff;\n  margin: auto;\n  margin-top: 24px;\n  padding: 30px 40px;\n  button{\n    width: 419px;\n    height: 44px;\n    margin-top: 43px;\n  }\n  .card-title{\n    font-size: 16px;\n    color: #282828;\n    font-weight: bold;\n  }\n"]))),w=v.a.div(i||(i=Object(O.a)(["\n  background: #F6F6F6;\n  border-radius: 6px;\n  width: 419px;\n  height: 70px;\n  padding: 16px;\n  font-size: 12px;\n  color: #282828;\n  margin-top: 20px;\n\n  .current-account {\n    margin-top: 4px;\n    font-size: 12px;\n    color: #8E8E8E;\n  }\n"]))),y=v.a.div(c||(c=Object(O.a)(["\n  .collateral-info{\n    display: flex;\n    margin-top: 20px;\n    .collateral-title{\n      font-size: 12px;\n      color: #282828;\n      font-weight: bold;\n    }\n    .collateral-minimum{\n      margin-left: 5px;\n      font-size: 12px;\n      color: #8E8E8E;\n    }\n  }\n  .input-collateral{\n    margin-top: 8px;\n    display: flex;\n    align-items: center;\n    .ant-input-number {\n      width: 240px;\n      height: 40px;\n      font-size: 14px;\n      color: #8E8E8E;\n      line-height: 40px;\n      margin-right: 16px;\n    }\n    .pcx-balance{\n      font-size: 12px;\n      color: #282828;\n    }\n  }\n"]))),k=v.a.div(r||(r=Object(O.a)(["\n  font-size: 12px;\n  color: #282828;\n"]))),N=t(762),E=t(511),F=t(890),z=t(893),C=t(894),S=t(796),A=t(223),B=t(774),T=t(766),q=t(767),I=t(166),D=t(221),R=t(249),P=v.a.div(s||(s=Object(O.a)(["\n   margin: 24px;\n    .vault-card-title{\n      font-size: 20px;\n      color: #3D3D3D;\n      font-weight: bold;\n    }\n"]))),M=v.a.div(o||(o=Object(O.a)(["\n   display: flex;\n  margin-top: 16px;\n"]))),V=v.a.div(l||(l=Object(O.a)(["\n  padding: 30px;\n  padding-top: 10px;\n  width: 598px;\n  height: 322px;\n  background: #fff;\n  border: 1px solid #EFEFEF;\n  border-radius: 10px;\n  button{\n    width: 200px;\n    height: 45px;\n    margin-left: 300px;\n  }\n  ul li{\n    margin-top: 20px;\n    .earn-pcx-num{\n      color: #34C69A;\n      font-size: 20px;\n      font-weight: bold;\n    }\n    .chainx-address{\n      width: 239px;\n      font-size: 12px;\n      color: #009FCF;\n      word-break:break-all;\n    }\n    .issue-redeem-num{\n      font-size: 20px;\n      color: #3D3D3D;\n      font-weight: bold;\n    }\n    .issuable-num{\n      font-size: 20px;\n      color: #3D3D3D;\n      font-weight: bold;\n    }\n    .collateral-rate{\n      display: flex;\n      font-size: 20px;\n      color: #3D3D3D;\n      font-weight: bold;\n      .collateral-rate-num{\n        font-size: 20px;\n        color: #34C69A;\n      }\n    }\n    .email-edit{\n      font-size: 12px;\n      color: #282828;\n    }\n  }\n  .right-ul{\n    margin-left: 50px;\n  }\n  .earn-card-title{\n    font-size: 12px;\n    color: #8E8E8E;\n    margin-bottom: 10px;\n  }\n"]))),G=v.a.div(d||(d=Object(O.a)(["\n  display: flex;\n"]))),X=v.a.div(u||(u=Object(O.a)(["\n position: absolute;\n"]))),H=v.a.div(b||(b=Object(O.a)(["\n .addCollateral-info{\n   display: flex;\n   justify-content: space-between;\n   .addCollateral-title{\n     font-size: 12px;\n     color: #282828;\n     font-weight: bold;\n   }\n   .addCollateral-amount{\n     font-size: 12px;\n     color: #282828;\n   }\n }\n  .ant-input-number{\n    width: 472px;\n    height: 44px;\n    margin-top: 7px;\n    line-height: 44px;\n  }\n"]))),J=v.a.div(j||(j=Object(O.a)(["\n  ul{\n    background: #F6F6F6;\n    border-radius: 6px;\n    margin-top: 16px;\n    width: 472px;\n    height: 60px;\n    padding: 12px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    .collateral-num{\n      font-size: 16px;\n      color: #34C69A;\n      font-weight: bold;\n    }\n    .before{\n      display: flex;\n      justify-content: flex-end;\n    }\n  }\n"]))),W=t(887),K=t(760),L=t.p+"static/media/arrow.d128c49c.svg",Q=t(14),U=function(e){var n,t=e.balance;return n=t?"number"===typeof t?(t/1e8).toFixed(5).toString():(t.toNumber()/1e8).toFixed(5).toString():"-",Object(Q.jsx)("span",{children:n})},Y=t(394);var Z,$,_=function(){var e=Object(m.useContext)(Y.a).pcxPrice,n=Object(N.a)().t,t=Object(m.useState)(!1),a=Object(h.a)(t,2),i=a[0],c=a[1],r=Object(m.useState)(null),s=Object(h.a)(r,2),o=s[0],l=s[1],d=Object(m.useState)("-"),u=Object(h.a)(d,2),b=(u[0],u[1]),j=Object(m.useState)(0),x=Object(h.a)(j,2),O=x[0],v=x[1],g=Object(Y.b)().exchangeRate,w=Object(m.useState)(0),y=Object(h.a)(w,2),k=y[0],F=y[1],C=Object(I.a)().currentAccount,S=Object(R.b)(),B=S.api,P=S.isApiReady,M=Object(T.a)(null===C||void 0===C?void 0:C.address);function Z(){return(Z=Object(f.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.web3FromAddress)(C.address);case 2:n=e.sent,B.tx.xGatewayBitcoinV2.addExtraCollateral(1e8*k).signAndSend(C.address,{signer:n.signer},(function(e){var n=e.status,t=e.dispatchError;e.events;if(console.log(n),n.isInBlock)E.a.success({message:"Completed at block hash ".concat(n.asInBlock.toString()),duration:0});else if(t){if(t.isModule){var a=B.registry.findMetaError(t.asModule),i=a.documentation,c=a.name,r=a.section;E.a.error({message:"".concat(r,".").concat(c,": ").concat(i.join(" ")),duration:0})}}else E.a.success({message:"Current status: ".concat(n.type),duration:0}),n.type})).catch((function(e){E.a.error({message:":( transaction failed', ".concat(e),duration:0})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(m.useEffect)((function(){P&&C&&Object(f.a)(p.a.mark((function e(){var n,t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.query.xGatewayBitcoinV2.vaults(C.address);case 2:if(!(n=e.sent).isSome){e.next=9;break}return t=n.unwrap(),e.next=7,B.query.system.account(C.address);case 7:a=e.sent,l({address:C.address,btcAddress:t.wallet,toBeRedeemToken:t.toBeRedeemedTokens,toBeIssuedToken:t.toBeIssuedTokens,issuedToken:t.issuedTokens,collateral:a.data.reserved});case 9:case"end":return e.stop()}}),e)})))()}),[C,P]),Object(m.useEffect)((function(){if(o){var e=g.price.mul(o.collateral).divn(Math.pow(10,g.decimal.toNumber()));b(e.toNumber().toFixed(2))}else b("-")}),[o,g]),Object(m.useEffect)((function(){if(P){var e=B.consts.xGatewayBitcoinV2.secureThreshold;v(e.toNumber()/100)}}),[P]),Object(Q.jsxs)(V,{children:[Object(Q.jsxs)(G,{children:[Object(Q.jsxs)("ul",{children:[Object(Q.jsxs)("li",{children:[Object(Q.jsx)("div",{className:"earn-card-title",children:"\u7d2f\u8ba1\u6536\u76ca"}),Object(Q.jsx)("div",{className:"earn-pcx-num",children:"- PCX"})]}),Object(Q.jsxs)("li",{children:[Object(Q.jsx)("div",{className:"earn-card-title",children:"\u5df2\u53d1\u884c"}),Object(Q.jsxs)("div",{className:"issue-redeem-num",children:[Object(Q.jsx)(U,{balance:null===o||void 0===o?void 0:o.issuedToken}),"XBTC"]})]}),Object(Q.jsxs)("li",{children:[Object(Q.jsx)("div",{className:"earn-card-title",children:"Chainx \u5730\u5740"}),Object(Q.jsx)("div",{className:"chainx-address",children:null===C||void 0===C?void 0:C.address})]})]}),Object(Q.jsxs)("ul",{className:"right-ul",children:[Object(Q.jsxs)("li",{children:[Object(Q.jsx)("div",{className:"earn-card-title",children:"\u53ef\u53d1\u884c\u91cf"}),Object(Q.jsxs)("div",{className:"issuable-num",children:[(+(null===o||void 0===o?void 0:o.collateral)/1e8*e/O).toFixed(5)," BTC"]})]}),Object(Q.jsxs)("li",{children:[Object(Q.jsx)("div",{className:"earn-card-title",children:"\u62b5\u62bc\u54c1 / \u62b5\u62bc\u7387"}),Object(Q.jsxs)("div",{className:"collateral-rate",children:[Object(Q.jsxs)("div",{children:[Object(Q.jsx)(U,{balance:null===o||void 0===o?void 0:o.collateral}),"PCX"]}),isFinite(+(null===o||void 0===o?void 0:o.collateral)/1e8/(+(null===o||void 0===o?void 0:o.issuedToken.toNumber())/1e9/e))?(+(null===o||void 0===o?void 0:o.collateral)/1e8/(+(null===o||void 0===o?void 0:o.issuedToken.toNumber())/1e9/e)).toFixed(5):"0",Object(Q.jsxs)("div",{className:"collateral-rate-num",children:["/",isFinite(+(null===o||void 0===o?void 0:o.collateral)/1e8/(+(null===o||void 0===o?void 0:o.issuedToken.toNumber())/1e9/e))?(+(null===o||void 0===o?void 0:o.collateral)/1e8/(+(null===o||void 0===o?void 0:o.issuedToken.toNumber())/1e9/e)).toFixed(5):"-","%"]})]})]}),Object(Q.jsxs)("li",{children:[Object(Q.jsx)("div",{className:"earn-card-title",children:"\u90ae\u7bb1"}),Object(Q.jsx)("div",{className:"email-edit",children:"\u7f16\u8f91"})]})]})]}),Object(Q.jsx)(W.a,{}),Object(Q.jsx)(A.a,{onClick:function(){c(!0)},children:n("adding collateral")}),Object(Q.jsx)(X,{children:Object(Q.jsxs)(K.a,{title:n("adding collateral"),visible:i,onCancel:function(){return c(!1)},footer:[Object(Q.jsx)(A.a,{onClick:function(){return c(!1)},children:"\u53d6\u6d88"}),Object(Q.jsx)(A.a,{onClick:function(){!function(){Z.apply(this,arguments)}(),c(!1)},children:"\u786e\u8ba4"})],children:[Object(Q.jsxs)(H,{children:[Object(Q.jsxs)("div",{className:"addCollateral-info",children:[Object(Q.jsx)("div",{className:"addCollateral-title",children:n("adding collateral")}),Object(Q.jsxs)("div",{className:"addCollateral-amount",children:[n("balance")," ",Object(q.a)(null===M||void 0===M?void 0:M.data.free)," PCX"]})]}),Object(Q.jsx)(z.a,{value:k,onChange:function(e){e?(console.log(e),F(e)):(console.log(e),F(0))}})]}),Object(Q.jsx)(J,{children:Object(Q.jsxs)("ul",{children:[Object(Q.jsxs)("li",{children:[Object(Q.jsx)("div",{children:"\u5f53\u524d\u62b5\u62bc\u7387"}),Object(Q.jsxs)("div",{className:"collateral-num",children:[isFinite(+(null===o||void 0===o?void 0:o.collateral)/1e8/(+(null===o||void 0===o?void 0:o.issuedToken.toNumber())/1e9/e))?(+(null===o||void 0===o?void 0:o.collateral)/1e8/(+(null===o||void 0===o?void 0:o.issuedToken.toNumber())/1e9/e)).toFixed(5):"-","%"]})]}),Object(Q.jsx)("li",{children:Object(Q.jsx)("img",{src:L,alt:""})}),Object(Q.jsxs)("li",{children:[Object(Q.jsx)("div",{children:"\u589e\u52a0\u540e\u62b5\u62bc\u7387"}),Object(Q.jsxs)("div",{className:"collateral-num before",children:[isFinite((+(null===o||void 0===o?void 0:o.collateral)+k)/1e8/(+(null===o||void 0===o?void 0:o.issuedToken.toNumber())/1e9/e))?((+(null===o||void 0===o?void 0:o.collateral)+k)/1e8/(+(null===o||void 0===o?void 0:o.issuedToken.toNumber())/1e9/e)).toFixed(5):"-","%"]})]})]})})]})})]})},ee=v.a.div(Z||(Z=Object(O.a)(["\n  width: 400px;\n  height: 322px;\n  background: #fff;\n  border: 1px solid #EFEFEF;\n  border-radius: 10px;\n  margin-left: 24px;\n  padding: 30px 20px;\n\n  .card-title {\n    font-size: 12px;\n    color: #8E8E8E;\n  }\n\n  .card-item {\n    margin-bottom: 20px;\n\n    .card-address {\n      margin-top: 4px;\n      font-size: 12px;\n      color: #009FCF;\n    }\n\n    .card-balance {\n      font-size: 20px;\n      color: #282828;\n      font-weight: bold;\n      margin-top: 4px;\n    }\n  }\n"]))),ne=v.a.div($||($=Object(O.a)(["\n  margin-top: 50px;\n  padding: 16px;\n  height: 107px;\n  width: 360px;\n  background: #F6F6F6;\n  border-radius: 6px;\n  .trade-info-header{\n    display: flex;\n    justify-content: space-between;\n    .header-title{\n      font-size: 12px;\n      color: #3D3D3D;\n    }\n    .trade-hash{\n      font-size: 12px;\n      color: #009FCF;\n      width: 125px;\n    }\n  }\n  ul {\n    display: flex;\n    justify-content: space-between;\n    text-align: center;\n    margin-top: 20px;\n    li{\n      .trade-title{\n        font-size: 12px;\n        color: #8E8E8E;\n      }\n      .trade-data{\n        margin-top: 12px;\n        font-size: 12px;\n        color: #282828;\n      }\n    }\n  }\n  \n  \n"])));var te=function(e){var n=Object(R.b)().api,t=Object(m.useState)(""),a=Object(h.a)(t,2),i=a[0],c=a[1];return Object(m.useEffect)((function(){function t(){return(t=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.query.xGatewayBitcoinV2.vaults(t);case 2:(a=e.sent).isNone||c(a.unwrap().wallet.toString());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){t.apply(this,arguments)}(e)}),[e]),{wallet:i,setWallat:c}};var ae,ie=function(){var e=Object(I.a)().currentAccount,n=Object(R.b)(),t=(n.api,n.isApiReady,Object(m.useState)("")),a=Object(h.a)(t,2),i=(a[0],a[1],te(null===e||void 0===e?void 0:e.address).wallet);return Object(Q.jsxs)(ee,{children:[Object(Q.jsxs)("div",{className:"card-item",children:[Object(Q.jsx)("div",{className:"card-title",children:"BTC \u5730\u5740"}),Object(Q.jsx)("div",{className:"card-address",children:i})]}),Object(Q.jsxs)("div",{className:"card-item",children:[Object(Q.jsx)("div",{className:"card-title",children:"BTC \u4f59\u989d"}),Object(Q.jsx)("div",{className:"card-balance",children:"-"})]}),Object(Q.jsxs)(ne,{children:[Object(Q.jsxs)("div",{className:"trade-info-header",children:[Object(Q.jsx)("div",{className:"header-title",children:"\u6700\u65b0\u4ea4\u6613\u54c8\u5e0c"}),Object(Q.jsx)("div",{className:"trade-hash",children:"-"})]}),Object(Q.jsxs)("ul",{children:[Object(Q.jsxs)("li",{children:[Object(Q.jsx)("div",{className:"trade-title",children:"\u786e\u8ba4\u6570"}),Object(Q.jsx)("div",{className:"trade-data",children:"-"})]}),Object(Q.jsxs)("li",{children:[Object(Q.jsx)("div",{className:"trade-title",children:"\u51fa\u5757\u65f6\u95f4"}),Object(Q.jsx)("div",{className:"trade-data",children:"-"})]}),Object(Q.jsxs)("li",{children:[Object(Q.jsx)("div",{className:"trade-title",children:"\u91d1\u989d"}),Object(Q.jsx)("div",{className:"trade-data",children:"-"})]})]})]})]})},ce=v.a.div(ae||(ae=Object(O.a)(["\n  margin-top: 24px;\n  padding: 0 32px;\n  padding-bottom: 32px;\n  width: 1022px;\n  height: 100%;\n  background: #fff;\n  border: 1px solid #EFEFEF;\n  border-radius: 10px;\n  .ant-table{\n    font-size:12px\n  }\n"]))),re=t(775),se=t(889),oe=t(393),le=t(736),de=t(377),ue=[{key:"1",name:"\u8d4e\u56de",age:32,address:"\u8d4e\u56de"}];var be=function(){var e=Object(m.useState)("issue"),n=Object(h.a)(e,2),t=n[0],a=n[1],i=Object(I.a)().currentAccount,c=(Object(R.b)().api,Object(N.a)().t),r=function(){var e=Object(R.b)(),n=e.api,t=e.isApiReady,a=Object(m.useState)([]),i=Object(h.a)(a,2),c=i[0],r=i[1],s=function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.query.xGatewayBitcoinV2.redeemRequests.entries();case 2:return t=e.sent,e.next=5,n.query.xGatewayBitcoinV2.vaults.entries();case 5:a=e.sent,(i=t.map((function(e){var n=Object(h.a)(e,2),t=n[0],i=n[1].unwrap(),c=a.find((function(e){var n=Object(h.a)(e,1)[0];return i.vault.eq(n.args[0])})),r=Object(h.a)(c,2)[1];return{id:t.args[0].toNumber(),vaultId:i.vault.toString(),requester:i.requester.toString(),amount:i.amount.toNumber(),chainxAddr:i.requester.toString(),userBtcAddr:r.unwrap().wallet.toString(),openTime:i.openTime.toNumber(),hash:"",countedBlock:0,status:"processing"}}))).sort((function(e,n){return e.id-n.id})),r(i);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.useEffect)((function(){t&&s()}),[t]),Object(m.useEffect)((function(){var e;return Object(f.a)(p.a.mark((function a(){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t&&(e=n.rpc.chain.subscribeFinalizedHeads(Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s();case 1:case"end":return e.stop()}}),e)})))));case 1:case"end":return a.stop()}}),a)})))(),function(){e&&e.then()}}),[t]),c}(),s=[{title:c("Request number"),dataIndex:"id",key:"id",width:80},{title:c("Amount"),dataIndex:"amount",key:"amount",width:80},{title:c("ChainX Address"),dataIndex:"chainxAddress",ellipsis:!0,key:"chainxAddress"},{title:c("BTC address"),dataIndex:"btcAddress",ellipsis:!0,key:"btcAddress"}];return Object(Q.jsxs)(ce,{children:[Object(Q.jsx)(re.a,{children:Object(Q.jsxs)("ul",{children:[Object(Q.jsx)("li",{onClick:function(){a("issue")},className:"issue"===t?"active":"",children:c("Redemption list")}),Object(Q.jsx)("li",{style:{cursor:"not-allowed"},className:"Redeem"===t?"active":"",children:c("History")})]})}),Object(Q.jsx)(re.c,{children:"issue"===t?Object(Q.jsx)(se.a,{columns:s,dataSource:r.filter((function(e){return Object(le.a)(Object(de.a)(e.vaultId),44)===(null===i||void 0===i?void 0:i.address)})).map((function(e){return{id:e.id.toString(),amount:Object(oe.a)(e.amount).toString(),chainxAddress:Object(le.a)(Object(de.a)(e.chainxAddr.toString()),44),btcAddress:e.userBtcAddr.toString(),hash:"",countedBlock:"0",status:"\u786e\u8ba4"}}))}):Object(Q.jsx)(se.a,{columns:s,dataSource:ue})})]})};var je=function(){return Object(Q.jsxs)(P,{children:[Object(Q.jsx)("div",{className:"vault-card-title",children:"\u8d44\u4ea7\u4fdd\u9669\u5e93"}),Object(Q.jsxs)(M,{children:[Object(Q.jsx)(_,{}),Object(Q.jsx)(ie,{})]}),Object(Q.jsx)(be,{})]})};var xe=function(){var e=Object(N.a)().t,n=Object(I.a)().currentAccount,t=Object(T.a)(null===n||void 0===n?void 0:n.address),a=Object(R.b)(),i=a.api,c=(a.isApiReady,Object(m.useState)(!1)),r=Object(h.a)(c,2),s=r[0],o=r[1];function l(){return(l=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Object(D.web3FromAddress)(n.address);case 3:a=e.sent,i.tx.xGatewayBitcoinV2.registerVault(1e8*t.collateral,t.address).signAndSend(n.address,{signer:a.signer},(function(e){var n=e.status,t=e.dispatchError;e.events;if(n.isInBlock)E.a.success({message:"Completed at block hash ".concat(n.asInBlock.toString()),duration:0});else if(t){if(t.isModule){var a=i.registry.findMetaError(t.asModule),c=a.documentation,r=a.name,s=a.section;E.a.error({message:"".concat(s,".").concat(r,": ").concat(c.join(" ")),duration:0})}}else E.a.success({message:"Current status: ".concat(n.type),duration:0}),"Finalized"===n.type&&o(!0)})).catch((function(e){E.a.error({message:":( transaction failed', ".concat(e),duration:0})}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(Q.jsx)("div",{children:s?Object(Q.jsx)(je,{}):Object(Q.jsxs)(g,{children:[Object(Q.jsx)("div",{className:"card-title",children:"\u6ce8\u518c\u4fdd\u9669\u5e93"}),Object(Q.jsxs)(F.a,{name:"register",onFinish:function(e){return l.apply(this,arguments)},children:[Object(Q.jsxs)(w,{children:[Object(Q.jsx)("div",{children:e("Register Account")}),Object(Q.jsx)("div",{className:"current-account",children:null===n||void 0===n?void 0:n.address})]}),Object(Q.jsxs)(y,{children:[Object(Q.jsxs)("div",{className:"collateral-info",children:[Object(Q.jsx)("div",{className:"collateral-title",children:e("Collateral")}),Object(Q.jsxs)("div",{className:"collateral-minimum",children:["(",e("Minimum value")," 1000)"]})]}),Object(Q.jsxs)("div",{className:"input-collateral",children:[Object(Q.jsx)(F.a.Item,{name:"collateral",rules:[{required:!0,message:e("Please enter the number of collateral")}],children:Object(Q.jsx)(z.a,{min:1e3,placeholder:e("Please enter the number of collateral")})}),Object(Q.jsxs)("div",{className:"pcx-balance",children:["PCX\u4f59\u989d\uff1a",Object(q.a)(null===t||void 0===t?void 0:t.data.free)]})]})]}),Object(Q.jsxs)(B.a,{children:[Object(Q.jsx)("div",{className:"btc-address-info",children:Object(Q.jsx)("div",{className:"btc-address-title",children:e("BTC address")})}),Object(Q.jsx)(F.a.Item,{name:"address",rules:[{required:!0,message:e("Please enter BTC address")}],children:Object(Q.jsx)(C.a,{placeholder:e("Please enter BTC address")})})]}),Object(Q.jsx)(k,{children:Object(Q.jsx)(F.a.Item,{name:"checked",valuePropName:"checked",rules:[{validator:function(n,t){return t?Promise.resolve():Promise.reject(new Error(e("Should accept agreement")))}}],children:Object(Q.jsxs)(S.a,{onChange:function(){return console.log("checked")},children:[Object(Q.jsx)("span",{children:"\u786e\u8ba4\u662f\u5426\u540c\u610f "}),Object(Q.jsx)("a",{href:"/",children:"\u8d44\u4ea7\u4fdd\u9669\u5e93\u534f\u8bae"})]})})}),Object(Q.jsx)(F.a.Item,{children:Object(Q.jsx)(A.a,{htmlType:"submit",children:"\u6ce8\u518c"})})]})]})})},pe=t(400),fe=Object(pe.createModel)((function(){return Object(m.useState)(null)}));n.default=function(){var e=Object(I.a)().currentAccount,n=Object(R.b)(),t=n.api,a=n.isApiReady,i=fe(),c=Object(h.a)(i,2),r=c[0],s=c[1];return Object(m.useEffect)((function(){function n(){return(n=Object(f.a)(p.a.mark((function n(){var a;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.query.xGatewayBitcoinV2.vaults((null===e||void 0===e?void 0:e.address)||"");case 2:a=n.sent,s(a.isNone?null:a.value);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}a&&function(){n.apply(this,arguments)}()}),[e,a]),Object(Q.jsx)(Q.Fragment,{children:r?Object(Q.jsx)(je,{}):Object(Q.jsx)(xe,{})})}}}]);
//# sourceMappingURL=6.36721972.chunk.js.map